!function(e){function t(o){if(n[o])return n[o].exports;var a=n[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/js/",t(t.s=9)}([function(e,t){e.exports=jQuery},function(e,t){e.exports=React},function(e,t){e.exports=ReactDOM},,,function(e,t,n){"use strict";(function(e){var o=n(1),a=(n.n(o),n(10)),i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),l=function(t){function n(e){var n=t.call(this,e)||this;return n.state={files:[],visible:!0,uploading:!1},n.service=new a.a(n.props.moduleId),n}return i(n,t),n.prototype.changeTab=function(e){this.setState({visible:"File"==e})},n.prototype.formatBytes=function(e,t){if(0==e)return"0 Bytes";var n=t||2,o=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(n))+" "+o[a]},n.prototype.addFile=function(e,t){var n=this.state.files.splice(0);n.push({name:e.name,total:e.size,uploaded:0,cancelled:!1,xhr:t}),this.setState({files:n})},n.prototype.updateFile=function(e,t){var n=this.state.files.map(function(n){return n.name==e&&(n.uploaded=t),n});this.setState({files:n})},n.prototype.updateFiles=function(e){var t=this.state.files.map(function(t){for(var n=0;n<e.length;n++){var o=e[n];if(o.name==t.name)return t.uploaded=o.size,t}return t});this.setState({files:t})},n.prototype.stopFile=function(e,t){var n=this;t.preventDefault();var o=[];this.state.files.forEach(function(t){t.name==e.name?(t.cancelled=!0,t.xhr.abort()):o.push(t)}),this.service.deleteFile(this.props.entryId,this.props.collectionId,this.props.id,e.name,function(){n.setState({files:o})})},n.prototype.componentDidMount=function(){var t=this,n=e('[name="__RequestVerificationToken"]').val();e(this.refs.upload).fileupload({url:this.service.baseServicepath+"/BlueImp/UploadFile",dataType:"json",headers:{moduleid:this.props.moduleId,tabid:this.props.tabId,entryid:this.props.entryId,collectionid:this.props.collectionId,uploadid:this.props.id,RequestVerificationToken:n},maxFileSize:2e6,maxChunkSize:1e6,sequentialUploads:1,dropZone:e(this.refs.dropzone),done:function(e,n){t.updateFiles(n.result)},progress:function(e,n){t.updateFile(n.files[0].name,n.uploadedBytes)},add:function(e,n){var o=n.submit();t.addFile(n.files[0],o)},start:function(e,n){t.setState({uploading:!0})},stop:function(e,n){t.setState({uploading:!1})}})},n.prototype.render=function(){var t=this;this.state.visible&&0==this.state.files.length||this.state.uploading?e(".dmxEditNextButton").hide():e(".dmxEditNextButton").show(),0!=this.state.files.length&&window.tsUpload&&(window.tsUpload.Tabs()[1].set_enabled(!1),window.tsUpload.Tabs()[2].set_enabled(!1));var n=[];return this.state.files.forEach(function(e){var a=Math.ceil(100*e.uploaded/e.total),i=100==a?"glyphicon glyphicon-ok":"glyphicon glyphicon-cloud-upload";n.push(o.createElement("tr",null,o.createElement("td",null,e.name),o.createElement("td",null,t.formatBytes(e.total,1)),o.createElement("td",null,a,"%"),o.createElement("td",null,o.createElement("i",{className:i},"Â ")),o.createElement("td",null,o.createElement("a",{href:"#",className:"btn btn-sm btn-warning",disabled:e.cancelled,onClick:function(n){return t.stopFile(e,n)},title:t.props.resources.Cancel},o.createElement("i",{className:"glyphicon glyphicon-remove"}))))),n.push(o.createElement("tr",null,o.createElement("td",{colSpan:5,style:{padding:0}},o.createElement("div",{className:"progress",style:{height:"4px"}},o.createElement("div",{className:"progress-bar",role:"progressbar","aria-valuenow":"60","aria-valuemin":"0","aria-valuemax":"100",style:{height:"4px",width:a.toString()+"%"}})))))}),o.createElement("div",null,o.createElement("div",{className:"dropzone-container"},o.createElement("div",{className:"dropzone",ref:"dropzone"},o.createElement("div",{className:"buttons",style:{width:"67px"}},o.createElement("div",{className:"button upload"},o.createElement("div",null,o.createElement("svg",{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 2048 2048",style:{enableBackground:"new 0 0 2048 2048"}},o.createElement("g",null,o.createElement("polygon",{fill:"currentColor",points:"698.6,807.7 943.6,561.3 943.6,1375.8 1113.4,1375.8 1113.4,565.1 1360,807.7 1470.9,696.8 1026.6,256.6 915.8,367.5 915.8,367.5 587.8,696.8 \t"}),o.createElement("polygon",{fill:"currentColor",points:"1582.5,1279.1 1582.5,1595.9 465.5,1595.9 465.5,1279.1 257.9,1279.1 257.9,1791.4 278.6,1791.4 511,1791.4 1537,1791.4 1790.1,1791.4 1790.1,1550.4 1790.1,1279.1 \t"})))),o.createElement("input",{type:"file",name:this.props.allowMultiple?"files[]":"file",multiple:this.props.allowMultiple,ref:"upload"}))),o.createElement("span",null,this.props.resources.Dropzone))),o.createElement("table",{className:"table table-responsive"},o.createElement("tbody",null,n)),o.createElement("input",{type:"hidden",name:"uploadid",id:"uploadid",value:this.props.id}))},n}(o.Component);t.a=l}).call(t,n(0))},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),a=(n.n(o),n(2)),i=(n.n(a),n(0)),l=(n.n(i),n(5));i(document).ready(function(){i(".jsUploadProvider").each(function(e,t){window.uploader=a.render(o.createElement(l.a,{id:i(t).data("id"),entryId:i(t).data("entryid"),collectionId:i(t).data("collectionid"),allowMultiple:i(t).data("allowmultiple"),moduleId:i(t).data("moduleid"),tabId:i(t).data("tabid"),resources:i(t).data("resources")}),t)})}),window.uploader=null,window.ChangeTab=function(e){window.uploader.changeTab(e)}},function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return o});var o=function(){function t(t){this.moduleId=-1,this.dnn=e,this.baseServicepath=this.dnn.dnnSF(this.moduleId).getServiceRoot("Bring2mind/DMX"),this.moduleId=t}return t.prototype.showError=function(e){alert(e)},t.prototype.ajaxCall=function(t,n,o,a,i,l,r,s,d,u){e.ajax({type:t,url:n+o+"/"+a+(void 0!=r?"/"+r:""),headers:{entryid:i,collectionid:l},beforeSend:this.dnn.dnnSF(this.moduleId).setModuleHeaders,data:s}).done(function(e){void 0!=d&&d(e)}).fail(function(e,t){void 0!=u&&u(e.responseText)})},t.prototype.deleteFile=function(e,t,n,o,a){this.ajaxCall("POST",this.baseServicepath,"BlueImp","Delete",e,t,null,{id:n,name:o},a)},t}()}).call(t,n(0))}]);